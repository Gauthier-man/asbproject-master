{% extends 'base.html.twig' %}

{% block title %}Mon espace utilisateur
{% endblock %}

{% block body %}
	<div
		class="d-flex">
		<!-- Sidebar -->
		<div class="bg-light border-end p-4" style="min-width: 220px; height: 100vh;">
			<h5 class="fw-bold mb-4">Mon Espace</h5>
			<ul class="nav flex-column">
				<li class="nav-item mb-2">
					<a href="{{ path('app_account') }}" class="nav-link text-dark">üè† Tableau de bord</a>
				</li>
				<li class="nav-item mb-2">
					<a href="{{ path('app_devis') }}" class="nav-link text-dark">üìù Faire un devis</a>
				</li>
				<li class="nav-item mb-2">
					<a href="#" class="nav-link text-dark">‚öôÔ∏è Mon profil</a>
				</li>
				<li class="nav-item mt-4">
					<a href="{{ path('app_logout') }}" class="nav-link text-danger">üö™ D√©connexion</a>
				</li>
			</ul>
		</div>

		<!-- Main Content -->
		<div class="p-4 flex-fill">
			<h2 class="mb-4 fw-bold">Bienvenue
				{{ user.prenom }}
				{{ user.nom }}</h2>

			<div class="row">
				<div class="col-md-12">
					<div class="bg-white shadow-sm rounded p-4 mb-4">
						<h5 class="fw-bold mb-3">Mes demandes de devis</h5>
						{% if devis is empty %}
							<p class="text-muted">Vous n'avez encore soumis aucun devis.</p>
						{% else %}
							{% for d in devis %}
								<div class="border rounded p-3 mb-3">
									<p>
										<strong>Type de projet :</strong>
										{{ d.typeProjet }}</p>
									<p>
										<strong>Localisation :</strong>
										{{ d.localisation }}</p>
									<p>
										<strong>Surface :</strong>
										{{ d.surface ?? 'Non pr√©cis√©' }}</p>
									<p>
										<strong>D√©lai :</strong>
										{{ d.delai ?? 'Non pr√©cis√©' }}</p>
									<p>
										<strong>Description :</strong>
										{{ d.description }}</p>
									<p>
										<strong>Statut :</strong>
										{% if d.status == 'en_cours' %}
											<span class="text-primary">En cours d‚Äô√©tude</span>
										{% elseif d.status == 'accepte' %}
											<span class="text-success">Accept√©</span>
										{% elseif d.status == 'refuse' %}
											<span class="text-danger">Refus√©</span>
										{% else %}
											<span class="text-muted">Inconnu</span>
										{% endif %}
									</p>
									{% if d.estimatedPrice %}
										<p>
											<strong>Prix estim√© :</strong>
											{{ d.estimatedPrice }}
											‚Ç¨</p>
									{% endif %}

									{% if d.adminNote %}
										<p>
											<strong>Message de l'√©quipe :</strong>
											{{ d.adminNote }}</p>
									{% endif %}
									<p>

										<a href="{{ path('account_devis_index') }}" class="btn btn-outline-primary btn-sm">Voir les d√©tails</a>


									</p>
								</div>
							{% endfor %}
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
